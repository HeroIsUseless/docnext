# åˆçº§
## varï¼Œletï¼Œconstï¼Œæ­»åŒºï¼Ÿ
varï¼Œletï¼Œconstå£°æ˜ç”¨æ³•æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯å®šä¹‰å˜é‡ï¼Œvarçš„å£°æ˜ä¼šè¢«æå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸï¼Œä½†ä»ç„¶åœ¨åŸåœ°æ–¹èµ‹å€¼ã€‚letï¼Œconstå¹¶ä¸ä¼šå£°æ˜æå‡ï¼Œå› æ­¤åœ¨å£°æ˜ä¹‹å‰çš„ä»£ç åŒºåŸŸå°±æ˜¯æš‚æ—¶æ€§æ­»åŒºã€‚
## callï¼Œapplyï¼Œbindçš„åŒºåˆ«ï¼Ÿ
ä¸‰è€…çš„åŠŸèƒ½éƒ½æ˜¯ç”¨æ¥æ”¹å˜å‡½æ•°ä¸­çš„ this æŒ‡å‘ã€‚
* call() æ–¹æ³•æ˜¯é¢„å®šä¹‰çš„ JavaScript æ–¹æ³•ã€‚å®ƒå¯ä»¥ç”¨æ¥è°ƒç”¨æ‰€æœ‰è€…å¯¹è±¡ä½œä¸ºå‚æ•°çš„æ–¹æ³•ã€‚é€šè¿‡ call()ï¼Œæ‚¨èƒ½å¤Ÿä½¿ç”¨å±äºå¦ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚callä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨å‡½æ•°å†…çš„thisæŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åï¼Œæ¯ä¸ªå‚æ•°è¢«ä¾æ¬¡ä¼ å…¥å‡½æ•°ã€‚ 
```js
  const person = {
    fullName: function (country, city) {
      return this.firstName + this.lastName + " " + country + " " + city
    }
  }
  const newPerson = {
    firstName: "fu",
    lastName: "chaoyang",
  }
  person.fullName.call(newPerson, 'china', 'xian') // fuchaoyang china xian 
```
* apply() å¯¹æ¯” call() ä»…å‚æ•°ä¸Šçš„ä¸åŒï¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…çš„thisæŒ‡å‘ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ï¼Œapplyæ–¹æ³•æŠŠè¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚
```js
  const person = {
    fullName: function (country, city) {
      return this.firstName + this.lastName + " " + country + " " + city
    }
  }
  const newPerson = {
    firstName: "fu",
    lastName: "chaoyang",
  }
  person.fullName.apply(newPerson, ['china', 'xian']) // fuchaoyang china xian
```
* bind() ç›¸å¯¹ call() è€Œè¨€ï¼Œä»…ç»‘å®šæ–°å¯¹è±¡ï¼Œä¸ç«‹å³æ‰§è¡Œã€‚
```js
  const person = {
    fullName: function (country, city) {
      return this.firstName + this.lastName + " " + country + " " + city
    }
  }
  const newPerson = {
    firstName: "fu",
    lastName: "chaoyang",
  }
  person.fullName.bind(newPerson, 'china', 'xian') // æ‰“å°å‡ºfullNameå‡½æ•°
  person.fullName.bind(newPerson, 'china', 'xian')() // fuchaoyang china xian
```
> æ‰‹å†™callå‡½æ•°
>```js
>  // callå®ç°
>  Function.prototype.myCall = function (context) {
>    const arg = [...arguments].slice(1)
>    const fn = Symbol()
>    context[fn] = this
>    const result = context[fn](...arg)
>    delete context[fn]
>    return result
>  }
>```
## è¯´ä¸€ä¸‹åŸå‹å’ŒåŸå‹é“¾ï¼Ÿ
JavaScript ä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¯¹è±¡åˆ†ä¸ºæ™®é€šå¯¹è±¡å’Œå‡½æ•°å¯¹è±¡ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼ˆ`typeof f === 'function'`ï¼‰ï¼Œå…¶ä»–éƒ½æ˜¯æ™®é€šå¯¹è±¡ï¼ˆ`typeof o === 'object'`ï¼‰ã€‚

JSåœ¨æ²¡æœ‰ç±»`class`å‰ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯é€šè¿‡ `new å‡½æ•°()` æ¥å®ç°çš„ï¼Œä¾‹å¦‚ï¼š
```js
var a = new Object() // æ­¤æ—¶aæ˜¯{}
var a = {} // ç­‰ä»·äº var a = new Object()
function b() {}
var a = new b() // æ­¤æ—¶aæ˜¯{}
```
åœ¨ JavaScript ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰æ—¶å€™ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­æ¯ä¸ªå‡½æ•°å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªprototype å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚

åŸå‹å¯¹è±¡æ˜¯å‡½æ•°å†…ç»´æŠ¤çš„ä¸€ä¸ªå¯¹è±¡æ¨¡ç‰ˆï¼Œå½“ `new å‡½æ•°()` ï¼Œå°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡æ‹·è´ä¸€ä»½è¿”å›ï¼Œä¾‹å¦‚ï¼š
```js
function b() {
    b.prototype.c = 1
    b.prototype.d = '2'
}
var a = new b() // æ­¤æ—¶aä¸º{c: 1, d: '2'}
```
å¦å¤–ï¼ŒJS åœ¨åˆ›å»ºå¯¹è±¡ï¼ˆä¸è®ºæ˜¯æ™®é€šå¯¹è±¡è¿˜æ˜¯å‡½æ•°å¯¹è±¡ï¼‰çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå«åš__proto__çš„å†…ç½®å±æ€§ï¼Œç”¨äºæŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œä¾‹å¦‚åœ¨ä¸Šé¢ğŸ‘†çš„ä¾‹å­ä¸­ï¼Œ`a.__proto__ === b.prototype`ã€‚

æ¯ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±æ€§ï¼Œä½†åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰ prototype å±æ€§ã€‚
åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°å¯¹è±¡å’ŒåŸå‹å¯¹è±¡ï¼‰éƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª constructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§ï¼ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰æŒ‡å‘ prototype å±æ€§æ‰€åœ¨çš„å‡½æ•°ï¼Œä¾‹å¦‚åœ¨ä¸Šé¢ğŸ‘†çš„ä¾‹å­ä¸­ï¼Œ`a.constructor === b.prototype.constructor === b.constructor === b`ã€‚

> æ³¨æ„`Function.prototype`æ˜¯å‡½æ•°å¯¹è±¡ï¼Œä½†æ²¡æœ‰prototypeå±æ€§ï¼Œå³`Function.prototype.prototype === undefined`

åŸå‹é“¾ï¼šåœ¨å¤šé‡ç»§æ‰¿ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥æ˜¯åŸå‹çš„æ‹·è´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ã€‚å› æ­¤ï¼Œå½“ä½ å°è¯•è®¿é—®å¯¹è±¡ä¸Šçš„å±æ€§æ—¶ï¼ŒJavaScriptå¼•æ“å¼€å§‹ä»å¯¹è±¡è‡ªèº«ä¸­æŸ¥æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šç»§ç»­æ£€æŸ¥__proto__ï¼Œä¸€ç›´åˆ°æ²¡æœ‰__proto__æˆ–è€…æ‰¾åˆ°è¯¥å±æ€§ã€‚å¦‚æœæ‰¾åˆ°æœ€åï¼Œæ­¤å±æ€§ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›undefinedã€‚
> åŸå‹é“¾çš„æœ€ä¸Šå±‚æ˜¯`Object.prototype`

## è®²ä¸€è®²jsçš„thisæŒ‡é’ˆï¼Ÿ
* å…¨å±€çš„thisæŒ‡é’ˆæŒ‡å‘windowsï¼ˆåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ this çš„å€¼æ˜¯ undefinedï¼‰ã€‚
* å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œthisè¢«ç»‘å®šä¸ºå…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹æ˜¯windowå¯¹è±¡ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘windowã€‚
* å½“ä¸€ä¸ªæ–¹æ³•ï¼ˆå½“å‡½æ•°è¢«ä¿å­˜ä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼‰è¢«è°ƒç”¨æ—¶ï¼Œthisè¢«ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚
* å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°å‰é¢åŠ ä¸Šnewå…³é”®å­—æ¥è°ƒç”¨ï¼ˆå½“æ„é€ å‡½æ•°ç”¨ï¼‰ï¼Œå‡½æ•°ä¸­çš„thisä¼šè¢«ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸Šã€‚
* å¯¹è±¡é‡Œçš„thisæŒ‡å‘windowã€‚ä¾‹å¦‚ï¼š`a = {b: this.k}`ï¼Œæ­¤æ—¶thisæŒ‡å‘windowsã€‚
* call/apply/bindï¼ŒthisæŒ‡é’ˆä¼šç»‘å®šæŒ‡å®šçš„å¯¹è±¡ã€‚
* äº‹ä»¶çš„thisæŒ‡é’ˆæŒ‡å‘å…ƒç´ æœ¬èº«ã€‚
* ç®­å¤´å‡½æ•°ä¸­çš„thisæ˜¯æŒ‡å‘ç®­å¤´å‡½æ•°å®šä¹‰æ—¶çš„ç¦»ç®­å¤´å‡½æ•°æœ€è¿‘çš„ä¸€ä¸ªå‡½æ•°çš„thisã€‚
## æ‰‹å†™newï¼Ÿ
```js
//Funä¸ºæ„é€ å‡½æ•°, argsè¡¨ç¤ºä¼ å‚
function myNew(Fun, ...args) {
    // 1.åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
    let obj = {};
    
    // 2.æŠŠæ–°å¯¹è±¡çš„åŸå‹æŒ‡é’ˆæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å±æ€§
    obj.__proto__ = Fun.prototype;
    
    // 3.æ”¹å˜thisæŒ‡å‘ï¼Œå¹¶ä¸”æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆä¼ å‚ï¼‰
    let res = Fun.apply(obj, args);
    
    // 4.åˆ¤æ–­å‡½æ•°æ‰§è¡Œç»“æœçš„ç±»å‹
    if (res instanceof Object) {
        return res;
    } else {
        return obj;
    }
}

let obj = myNew(One, "XiaoMing", "18");
console.log("newObj:", obj);
```
## é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ
é—­åŒ…æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®å’Œä½¿ç”¨å…¶å®šä¹‰å¤–éƒ¨çš„å˜é‡ï¼Œè®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶æä¾›å¾ˆå¥½çš„å°è£…å’ŒæŠ½è±¡ã€‚
## æ‰‹å†™é˜²æŠ–èŠ‚æµï¼Ÿ
* é˜²æŠ–ï¼ˆdebounceï¼‰ï¼šæ¯æ¬¡è§¦å‘å®šæ—¶å™¨åï¼Œå–æ¶ˆä¸Šä¸€ä¸ªå®šæ—¶å™¨ï¼Œç„¶åé‡æ–°è§¦å‘å®šæ—¶å™¨ã€‚é˜²æŠ–ä¸€èˆ¬ç”¨äºç”¨æˆ·æœªçŸ¥è¡Œä¸ºçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚æœç´¢æ¡†è¾“å…¥å®æ—¶æç¤ºã€‚
  ```js
  let timer;
  function debounce(cb, time) {
    clearTimeout(timer);
    timer = setTimeout(() => {
        cb();
    }, time)
  }
  
  onInputChange(text) {
    debounce(() => {
      // è·å–å®æ—¶æç¤º
    }, 100)
  }
  ```
  ```js
  // å¤æ‚ä¸€ç‚¹çš„
  function debounce(func, time) {
    let timer;
    return function() {
      const [that, args] = [this, arguments];
      clearTimeout(timer)
      timer = setTimeout(() => {
        func.apply(that, args);
      }, time);
    }
  }

  onInputChange = debounce((text) => {
    // è·å–å®æ—¶æç¤º
  }, 1000)
  ```
* èŠ‚æµï¼ˆthrottleï¼‰ï¼šæ¯æ¬¡è§¦å‘å®šæ—¶å™¨åï¼Œç›´åˆ°è¿™ä¸ªå®šæ—¶å™¨ç»“æŸä¹‹å‰æ— æ³•å†æ¬¡è§¦å‘è¯¥å‡½æ•°ã€‚ä¸€èˆ¬ç”¨äºå¯é¢„çŸ¥çš„ç”¨æˆ·è¡Œä¸ºçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚é™åˆ¶æŒ‰é’®ç‚¹å‡»çš„è§¦å‘é¢‘ç‡ï¼Œé˜²æ­¢é‡å¤çš„æäº¤ã€‚
```js
let previous = 0;
function throttle(cb, time) {
  const now = Date.now();
  if (now - previous > time) {
    cb();
    previous = now;
  }
}

onButtonClick() {
  throttle(() => {
    // æäº¤è¡¨å•
  }, 1000)
}
```
```js
// å¤æ‚ä¸€ç‚¹çš„
function throttle(func, time) {
  let previous = 0;
  return function() {
    const [that, args] = [this, arguments];
    const now = Date.now();
    if (now - previous > time) {
      previous = now;
      func.apply(that, args);
    }
  }
}
```
## äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿ
JSæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶å®ç°å•çº¿ç¨‹å¼‚æ­¥çš„ã€‚JSæ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå³æ‰§è¡Œæ ˆã€‚ä¸»çº¿ç¨‹ä¹‹å¤–è¿˜å­˜åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—(ä¹Ÿæœ‰äººç§°ä¹‹ä¸ºæ¶ˆæ¯é˜Ÿåˆ—)ï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚äº‹ä»¶å¾ªç¯çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
* é¦–å…ˆï¼Œæ£€æŸ¥æ‰§è¡Œæ ˆï¼Œçœ‹çœ‹æ˜¯å¦æœ‰åŒæ­¥ä»»åŠ¡éœ€è¦è¿è¡Œã€‚
* å¦‚æœæ‰§è¡Œæ ˆä¸ºç©ºï¼Œé‚£ä¹ˆå°±æŸ¥çœ‹ä»»åŠ¡é˜Ÿåˆ—ã€‚
* å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰å¾…å¤„ç†çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±å°†å®ƒç§»å‡ºé˜Ÿåˆ—å¹¶æ”¾å…¥è°ƒç”¨å †æ ˆï¼Œä»¥ä¾¿æ‰§è¡Œå®ƒçš„å›è°ƒå‡½æ•°ã€‚

åœ¨JavaScriptä¸­ï¼Œä»»åŠ¡é˜Ÿåˆ—å¯ä»¥åˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯è¿­ä»£ä¸­ï¼Œé¦–å…ˆä¼šæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚å½“æ‰€æœ‰çš„å¾®ä»»åŠ¡å®Œæˆåï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚
å®ä»»åŠ¡åŒ…æ‹¬å¦‚setTimeoutï¼ŒsetIntervalï¼ŒsetImmediateï¼ŒI/Oï¼ŒUI renderingç­‰ï¼Œè€Œå¾®ä»»åŠ¡åŒ…æ‹¬å¦‚Promise,MutationObserverç­‰ã€‚

## æ•è·ä¸å†’æ³¡ï¼Ÿ
åœ¨ HTML ä¸­ï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œäº‹ä»¶ä¼šç»è¿‡ä¸‰ä¸ªé˜¶æ®µï¼šæ•è·é˜¶æ®µã€ç›®æ ‡é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µã€‚
* æ•è·é˜¶æ®µï¼ˆCapture Phaseï¼‰ï¼šä» document å¯¹è±¡å¼€å§‹ï¼Œé€çº§å‘ä¸‹ä¼ é€’ï¼Œç›´åˆ°äº‹ä»¶æºå…ƒç´ ã€‚åœ¨æ•è·é˜¶æ®µï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¼šæŒ‰ç…§ç”±å¤–å‘å†…ï¼ˆç”±çˆ¶å…ƒç´ åˆ°å­å…ƒç´ ï¼‰çš„é¡ºåºè¢«ä¾æ¬¡æ‰§è¡Œã€‚
* ç›®æ ‡é˜¶æ®µï¼ˆTarget Phaseï¼‰ï¼šå½“äº‹ä»¶ä¼ é€’åˆ°äº‹ä»¶æºå…ƒç´ æ—¶ï¼Œå°±è¿›å…¥äº†ç›®æ ‡é˜¶æ®µã€‚åœ¨ç›®æ ‡é˜¶æ®µï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ event.target å±æ€§è·å–åˆ°å…·ä½“è§¦å‘äº‹ä»¶çš„å…ƒç´ ã€‚
* å†’æ³¡é˜¶æ®µï¼ˆBubble Phaseï¼‰ï¼šä»äº‹ä»¶æºå…ƒç´ å¼€å§‹ï¼Œé€çº§å‘ä¸Šä¼ é€’ï¼Œç›´åˆ° document å¯¹è±¡ã€‚åœ¨å†’æ³¡é˜¶æ®µï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¼šæŒ‰ç…§ç”±å†…å‘å¤–ï¼ˆç”±å­å…ƒç´ åˆ°çˆ¶å…ƒç´ ï¼‰çš„é¡ºåºè¢«ä¾æ¬¡æ‰§è¡Œã€‚

åœ¨æ•è·é˜¶æ®µä¸­ï¼Œå¯ä»¥é€šè¿‡ addEventListener() å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆé€‰é¡¹ï¼‰è®¾ç½® capture é€‰é¡¹æ¥ç›‘å¬äº‹ä»¶çš„æ•è·é˜¶æ®µï¼Œå¦åˆ™ç›‘å¬å°†åœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚

äº‹ä»¶ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨äº† event.stopPropagation() æ–¹æ³•ï¼Œå½“ä¾¦å¬çš„äº‹ä»¶æ˜¯æ•è·æ—¶,é˜»æ–­çš„å°±æ˜¯æ•è·è¿‡ç¨‹,å½“ä¾¦å¬çš„äº‹ä»¶æ˜¯å†’æ³¡æ—¶,é˜»æ–­çš„å°±æ˜¯å†’æ³¡è¿‡ç¨‹ã€‚
## typeofï¼Œinstantofæ˜¯ä»€ä¹ˆï¼Ÿ
* typeofæ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨æ¥è¯´æ˜å˜é‡çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨æ­¤æ¥åˆ¤æ–­number, string, object, boolean, function, undefined, symbol è¿™ä¸ƒç§ç±»å‹ã€‚å¯¹äºå¯¹è±¡ã€æ•°ç»„ã€null è¿”å›çš„å€¼æ˜¯ objectã€‚
* instanceofè¿ç®—ç¬¦ç”¨äºæŒ‡ç¤ºä¸€ä¸ªå˜é‡æ˜¯å¦å±äºæŸä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚è¿”å›å€¼ä¸ºå¸ƒå°”å€¼ã€‚instanceof ä¸»è¦çš„å®ç°åŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ prototype åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚
## è®²ä¸€è®²es5/6/7/8/9æ–°ç‰¹ç‚¹ï¼Ÿ
* **ECMAScript 5 ä¹Ÿç§°ä¸º ES5 å’Œ ECMAScript 2009ã€‚**
    + `"use strict"` æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸èƒ½ä½¿ç”¨æœªå£°æ˜çš„å˜é‡
    + `String.trim()/charAt()` åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦
    + `Array.isArray()/forEach()/map()/fliter()/indexOf()/reduce()`
    + `JSON.parse()/stringify()`
    + `Date.now()`
    + `Object.key()/defineProperty()/getPrototypeOf()`ç­‰
    + å±æ€§ Getter å’Œ Setter
* **ECMAScript 6ï¼Œä¹Ÿè¢«ç§°ä¸ºES6å’ŒES2015ï¼Œæ˜¯JavaScriptçš„ç¬¬å…­ä¸ªç‰ˆæœ¬**
    + let å’Œ const ä»¥åŠå—çº§ä½œç”¨åŸŸï¼Œåœ¨ES6ä¹‹å‰ï¼ŒJavaScriptåªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚
    + æ¨¡æ¿å­—ç¬¦ä¸²
    + `String.startWith()/endWith()`
    + ç®­å¤´å‡½æ•°
    + å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå‰©ä½™å‚æ•°
    + è§£æ„èµ‹å€¼ï¼Œå±•å¼€è¿ç®—ç¬¦
    + å¯¹è±¡å­—é¢é‡çš„å¢å¼ºï¼šå±æ€§å’Œæ–¹æ³•çš„ç®€æ´è¡¨ç¤ºæ³•ï¼Œæ–¹æ‹¬å·è¡¨ç¤ºæ³•
    + `Object.keys()/values()/entries()/assign()`
    + å…¨å±€ä½œç”¨åŸŸä¸­çš„ this æŒ‡å‘ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ this çš„å€¼æ˜¯ undefinedã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå®ƒä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ window å¯¹è±¡ï¼ŒNode.js ä¸­æ˜¯ global å¯¹è±¡ï¼‰ã€‚
    + `Array.includes()/find()/from()/fill()`
    + setå’Œmapæ•°æ®ç»“æ„
    + éå†å™¨ä¸forâ€¦ofå¾ªç¯
* **ES2016ï¼ˆES7ï¼‰**
    + å¹‚è¿ç®—ç¬¦** ä½†ä¸€èˆ¬ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéœ€æ±‚ä¼šç”¨åˆ°å¹‚ä¹˜
    + `Array.prototype.includes()`ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»ç¬¬å‡ ä¸ªä¸‹æ ‡å¼€å§‹æœï¼Œé»˜è®¤0
* **ES2017 ES8**
    + `Object.values`, `Object.entries`
    + ç»“å°¾å…è®¸é€—å·
    + asyncå¼‚æ­¥å‡½æ•°
* **ES2018 ES9**
    + å¼‚æ­¥å¾ªç¯ï¼ŒåŒæ­¥å¾ªç¯ä¸­è°ƒç”¨èƒ½å¼•èµ·ç­‰å¾…çš„å¼‚æ­¥å‡½æ•°ï¼Œæ˜¯ä¸ä¼šè¾¾åˆ°é¢„æœŸç›®çš„ï¼Œå¾ªç¯æœ¬èº«ä¾æ—§ä¿æŒåŒæ­¥ï¼Œå¹¶åœ¨å†…éƒ¨å¼‚æ­¥å‡½æ•°ä¹‹å‰å®Œæˆã€‚å› æ­¤æ–°å¢å¼‚æ­¥å¾ªç¯`for await(let i of array)`
    + å¼‚æ­¥çš„finally
    + å¯¹è±¡çš„å±•å¼€è¿ç®—ç¬¦ï¼Œè¿™é¡¹ç‰¹æ€§åœ¨ES6ä¸­å·²ç»å¼•å…¥ï¼Œä½†æ˜¯ä»…é™äºæ•°ç»„ã€‚
* **ES2019 ES10**
    + catchçš„å‚æ•°eå¯ä»¥çœç•¥æ‰
    + `Object.fromEntries()`æ–¹ä¾¿åœ°å°†é”®å€¼å¯¹åˆ—è¡¨ï¼ˆä¾‹å¦‚ Mapã€æ•°ç»„(ç¬¦åˆé”®å€¼å¯¹çš„)ç­‰ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚
    + `Array.flat()`èƒ½å°†é«˜ç»´æ•°ç»„é™ä¸€ç»´ã€‚
* **ES 2020 (ES11)**
    + å¯é€‰é“¾æ“ä½œç¬¦
    + BigInt å®ƒæ˜¯JavaScriptçš„ç¬¬7ä¸ªåŸå§‹ç±»å‹ï¼Œå¯å®‰å…¨åœ°è¿›è¡Œå¤§æ•°æ•´å‹è®¡ç®—ã€‚ åªéœ€è¦åœ¨æ•°å­—åé¢åŠ ä¸Š n å³å¯ã€‚ä½†ä¸èƒ½å°† BigIntä¸Numberç®—æœ¯è®¡ç®—ã€‚
## `for in`, `for of`åŒºåˆ«ï¼Ÿ
* `for in`å¾ªç¯è¿”å›çš„å€¼éƒ½æ˜¯å¯¹è±¡çš„é”®å€¼å(æ•°ç»„å³ä¸‹æ ‡)ï¼Œéå†é¡ºåºæœ‰å¯èƒ½ä¸æ˜¯æŒ‰ç…§å®é™…æ•°ç»„çš„å†…éƒ¨é¡ºåºï¼Œä½¿ç”¨forâ€¦ inä¼šéå†æ•°ç»„/å¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾å±æ€§ï¼ŒåŒ…æ‹¬ç»§æ‰¿å±æ€§ï¼ŒåŸå‹ã€‚æ‰€ä»¥ä¸é€‚åˆéå†æ•°ç»„ï¼Œæ›´é€‚åˆéå†å¯¹è±¡ã€‚
* forâ€¦ of å¾ªç¯ç”¨æ¥è·å–ä¸€å¯¹é”®å€¼å¯¹ä¸­çš„å€¼ï¼Œç›¸å¯¹äºforEachè€Œè¨€å¯ä»¥ä¸ breakã€continueå’Œreturn é…åˆä½¿ç”¨ï¼Œå¯ä»¥éšæ—¶é€€å‡ºå¾ªç¯ã€‚ä½†forâ€¦ofå¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Symbol.iteratoræ–¹æ³•ã€‚
å› æ­¤ä¸èƒ½éå†å¯¹è±¡ï¼Œå› ä¸ºæ²¡æœ‰è¿­ä»£å™¨å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬æ•°ç»„ã€Set å’Œ Map ç»“æ„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚argumentså¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰ã€Generator å¯¹è±¡ï¼Œä»¥åŠå­—ç¬¦ä¸²ã€‚
> åœ¨ECMAScriptè§„èŒƒä¸­å®šä¹‰äº† ã€Œæ•°å­—å±æ€§åº”è¯¥æŒ‰ç…§ç´¢å¼•å€¼â¼¤â¼©å‡åºæ’åˆ—ï¼Œå­—ç¬¦ä¸²å±æ€§æ ¹æ®åˆ›å»ºæ—¶çš„é¡ºåºå‡åºæ’åˆ—ã€‚ã€åœ¨è¿™â¾¥æˆ‘ä»¬æŠŠå¯¹è±¡ä¸­çš„æ•°å­—å±æ€§ç§°ä¸º ã€Œæ’åºå±æ€§ã€ï¼Œåœ¨V8ä¸­è¢«ç§°ä¸º elementsï¼Œå­—ç¬¦ä¸²å±æ€§å°±è¢«ç§°ä¸º ã€Œå¸¸è§„å±æ€§ã€ï¼Œ åœ¨V8ä¸­è¢«ç§°ä¸º propertiesã€‚
## éå†å¯¹è±¡çš„å‡ ç§æ–¹æ³•ï¼Ÿ
* `for...in`
* `Object.keys()`ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›æ˜¯è¯¥å¯¹è±¡çš„keyæ•°ç»„
* `Object.values()`ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›æ˜¯è¯¥å¯¹è±¡çš„valueæ•°ç»„
* `Object.entries()`ï¼Œè¿”å›å€¼ä¸ºObject.values()ä¸Object.keys()çš„ç»“åˆï¼Œè¿”å›ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå°æ•°ç»„éƒ½æ˜¯[ [å±æ€§åï¼Œå±æ€§å€¼],[å±æ€§åï¼Œå±æ€§å€¼] ]
* `Object.getOwnPropertyNames()`ï¼Œå…¶è¿”å›ç»“æœä¸Object.keys()ç›¸ä¼¼ï¼Œä½†ä¼šè¿”å›å¯¹è±¡å¾—æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬äº†ä¸å¯æšä¸¾å±æ€§
## JS çš„arrayçš„å‡½æ•°ä¸­ï¼Œæœ‰å“ªäº›æ˜¯ç›´æ¥ä¿®æ”¹æ•°ç»„æœ¬ä½“ï¼Ÿ
* æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼š
`pop()`,`push()`, `shift()`,`unshift()`,`splice()`,`sort()`,`reverse()`
* ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼š
`slice()`,`concat()`
## æ·±æ‹·è´æµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ
* æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæµ…æ‹·è´æ˜¯å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œ`Object.assign()`ï¼Œæ‹“å±•è¿ç®—ç¬¦éƒ½æ˜¯æµ…æ‹·è´
* æ·±æ‹·è´æ˜¯é€’å½’æ‹·è´æ·±å±‚æ¬¡ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæ·±æ‹·è´æ˜¯æ–°å¼€æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ä¸åŒçš„åœ°å€ï¼Œ`JSON.stringify()`æ˜¯æ·±æ‹·è´ï¼Œä½†æ˜¯ä¼šå¿½ç•¥undefinedã€symbolå’Œå‡½æ•°
```js
function deepClone(obj, hash = new WeakMap()) {
  if (typeof obj === 'object') {

  } else {
    return obj;
  }
  if (obj === null) return obj; // å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ
  if (obj instanceof Date) return new Date(obj);
  if (obj instanceof RegExp) return new RegExp(obj);
  // å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼  å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´
  if (typeof obj !== "object") return obj;
  // æ˜¯å¯¹è±¡çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´
  if (hash.get(obj)) return hash.get(obj);
  let cloneObj = new obj.constructor();
  // æ‰¾åˆ°çš„æ˜¯æ‰€å±ç±»åŸå‹ä¸Šçš„constructor,è€ŒåŸå‹ä¸Šçš„ constructoræŒ‡å‘çš„æ˜¯å½“å‰ç±»æœ¬èº«
  hash.set(obj, cloneObj);
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      // å®ç°ä¸€ä¸ªé€’å½’æ‹·è´
      cloneObj[key] = deepClone(obj[key], hash);
    }
  }
  return cloneObj;
}
```
## CommonJS å’Œ AMD/CMD è§„èŒƒï¼Œä»¥åŠES6çš„æ¨¡å—ï¼Ÿ
* AMDè§„èŒƒï¼Œå³å¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶ã€‚æ ¸å¿ƒæ˜¯é¢„åŠ è½½ï¼Œå…ˆå¯¹ä¾èµ–çš„å…¨éƒ¨æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼ŒåŠ è½½å®Œäº†å†è¿›è¡Œå¤„ç†ã€‚
* CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚æ¨¡å—å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œä½†æ˜¯åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œç„¶åè¿è¡Œç»“æœå°±è¢«ç¼“å­˜äº†ï¼Œä»¥åå†åŠ è½½ï¼Œå°±ç›´æ¥è¯»å–ç¼“å­˜ç»“æœã€‚è¦æƒ³è®©æ¨¡å—å†æ¬¡è¿è¡Œï¼Œå¿…é¡»æ¸…é™¤ç¼“å­˜ã€‚
æ¨¡å—åŠ è½½çš„é¡ºåºï¼ŒæŒ‰ç…§å…¶åœ¨ä»£ç ä¸­å‡ºç°çš„é¡ºåºã€‚
## JSçš„éšå¼è½¬æ¢ï¼Ÿ
åœ¨ä½¿ç”¨ä¸åŒç±»å‹çš„å€¼è¿›è¡Œæ“ä½œæ—¶ï¼ŒJavaScriptä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚
* æˆ‘ä»¬åœ¨å¯¹å„ç§éNumberç±»å‹è¿ç”¨æ•°å­¦è¿ç®—ç¬¦(- * /)æ—¶ï¼Œä¼šå…ˆå°†éNumberç±»å‹è½¬æ¢ä¸ºNumberç±»å‹ã€‚
* æˆ‘ä»¬åœ¨å¯¹å„ç§éNumberç±»å‹è¿ç”¨æ•°å­¦è¿ç®—ç¬¦(+)æ—¶ï¼š ï¼ˆä»¥ä¸‹ 3 ç‚¹ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰
  * å½“ä¸€ä¾§ä¸ºStringç±»å‹ï¼Œä¼šå°†å¦ä¸€ä¾§è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹å¹¶è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ã€‚
  * å½“ä¸€ä¾§ä¸ºNumberç±»å‹ï¼Œå¦ä¸€ä¾§ä¸ºéå­—ç¬¦ä¸²çš„å…¶ä»–åŸå§‹ç±»å‹ï¼Œåˆ™å°†åŸå§‹ç±»å‹è½¬æ¢ä¸ºNumberç±»å‹ã€‚
  * å½“ä¸€ä¾§ä¸ºNumberç±»å‹ï¼Œå¦ä¸€ä¾§ä¸ºå¼•ç”¨ç±»å‹ï¼Œå°†å¼•ç”¨ç±»å‹å’ŒNumberç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²åæ‹¼æ¥ã€‚
* å½“æˆ‘ä»¬ä½¿ç”¨é€»è¾‘è¯­å¥ï¼ˆä¾‹å¦‚if while forï¼‰æ—¶ï¼Œæ¡ä»¶å€¼å°†è½¬ä¸ºBooleanå€¼ï¼Œåªæœ‰ null undefined '' NaN 0 false è¿™å‡ ä¸ªæ˜¯ falseï¼Œå…¶ä»–çš„æƒ…å†µéƒ½æ˜¯ trueï¼Œæ¯”å¦‚ {} , []ã€‚ã€‚
* å½“æˆ‘ä»¬ä½¿ç”¨`==`æ—¶ï¼š 
  * NaNå’Œå…¶ä»–ä»»ä½•ç±»å‹æ¯”è¾ƒæ°¸è¿œè¿”å›falseï¼ˆåŒ…æ‹¬å’Œä»–è‡ªå·±ï¼‰ã€‚
  * Boolean å’Œå…¶ä»–ä»»ä½•ç±»å‹æ¯”è¾ƒï¼ŒBoolean é¦–å…ˆè¢«è½¬æ¢ä¸º Number ç±»å‹ã€‚
  * Stringå’ŒNumberæ¯”è¾ƒï¼Œå…ˆå°†Stringè½¬æ¢ä¸ºNumberç±»å‹ã€‚
  * null == undefinedæ¯”è¾ƒç»“æœæ˜¯trueï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œnullã€undefinedå’Œå…¶ä»–ä»»ä½•ç»“æœçš„æ¯”è¾ƒå€¼éƒ½ä¸ºfalseã€‚
  * åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹åšæ¯”è¾ƒæ—¶ï¼Œå¼•ç”¨ç±»å‹ä¼šä¾ç…§ToPrimitiveè§„åˆ™è½¬æ¢ä¸ºåŸå§‹ç±»å‹ã€‚
# é«˜çº§
## ä¼šbabelæ’ä»¶å¼€å‘å—ï¼Ÿ
Babelç¼–è¯‘æ˜¯ä¸€ä¸ªcode to codeçš„è¿‡ç¨‹ï¼Œæ•´ä¸ªæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š
* è§£æï¼ˆparseï¼‰ï¼šå°†æºç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘(AST)
* è½¬æ¢ï¼ˆtransformï¼‰ï¼šéå†ASTï¼Œå¹¶ä½¿ç”¨babel apiå¯¹ASTèŠ‚ç‚¹è¿›è¡Œå¢åˆ æ”¹ï¼Œbabel ç»´æŠ¤ä¸€ä¸ªç§°ä½œ Visitor çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®šä¹‰äº†ç”¨äº AST ä¸­è·å–å…·ä½“èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„ç±»å‹åŒ¹é… visitor ä¸­çš„ç±»å‹ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œ
éå† AST èŠ‚ç‚¹çš„æ—¶å€™ä¼šéå†ä¸¤æ¬¡ï¼ˆè¿›å…¥å’Œé€€å‡ºï¼‰ï¼Œè¿™æ ·å‘½ä¸­ç›®æ ‡èŠ‚ç‚¹å¹¶è¿›è¡Œé€»è¾‘å¤„ç†ã€‚
* ç”Ÿæˆï¼ˆgenerateï¼‰ï¼šå°†è½¬æ¢åçš„ AST è½¬æ¢æˆä»£ç ï¼ŒåŒæ—¶å¯ä»¥åˆ›å»ºSource Mapæ˜ å°„ã€‚
ç¼–å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œvisitorå°±æ˜¯å…¶ä¸­æœ€ä¸»è¦çš„å¯¹è±¡ï¼Œå…¶ä»–éƒ½æ˜¯ä¸€äº›é…ç½®ã€‚
åœ¨babel.config.jsoné‡Œçš„pluginsï¼ŒåŠ ä¸Šè¿™ä¸ªæ–‡ä»¶ï¼Œå°±èƒ½è¿›è¡Œè½¬æ¢äº†ã€‚
> ASTå¯è§†åŒ–å¹³å°ï¼šhttps://astexplorer.net/
